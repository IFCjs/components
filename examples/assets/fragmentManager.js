import{C as B,S as L,P as x,a as k,b as S,D as U,A as F,c as A,e as E,F as I,T as R,x as d}from"./index-CizoHJPb.js";import{S as D}from"./stats.min-BdKNJBVT.js";const M=document.getElementById("container"),e=new B,g=new L(e);g.setup();e.scene=g;const s=new x(e,M);e.renderer=s;const w=new k(e);e.camera=w;e.raycaster=new S(e);e.init();s.postproduction.enabled=!0;const h=e.scene.get();w.controls.setLookAt(12,6,8,0,0,-10);const f=new U;f.position.set(5,10,3);f.intensity=.5;h.add(f);const b=new F;b.intensity=.5;h.add(b);const P=new A(e,new E(6710886)),T=P.get(),_=s.postproduction.customEffects;_.excludedMeshes.push(T);const o=new I(e),r=new R(e);e.ui.addToolbar(r);async function j(){if(o.groups.length)return;const n=await(await fetch("../../../resources/small.frag")).arrayBuffer(),a=new Uint8Array(n),i=await o.load(a);console.log(i)}const l=new d(e);l.materialIcon="download";l.tooltip="Load model";r.addChild(l);l.onClick.add(()=>j());function v(t){const n=document.createElement("a");n.href=URL.createObjectURL(t),n.download=t.name,document.body.appendChild(n),n.click(),n.remove()}function O(){if(!o.groups.length)return;const t=o.groups[0],n=o.export(t),a=new Blob([n]),i=new File([a],"small.frag");v(i)}const p=new d(e);p.materialIcon="exit_to_app";p.tooltip="Export model";r.addChild(p);p.onClick.add(()=>O());function G(){o.dispose()}const m=new d(e);m.materialIcon="delete";m.tooltip="Delete model";r.addChild(m);m.onClick.add(()=>G());function q(){if(o.groups.length)return;const t=document.createElement("input");t.type="file",t.onchange=async()=>{if(!(t.files&&t.files[0]))return;const n=t.files[0];if(n.name.includes(".frag")){const a=URL.createObjectURL(n),C=await(await fetch(a)).arrayBuffer(),y=new Uint8Array(C);o.load(y)}t.remove()},t.click()}const u=new d(e);u.materialIcon="folder_open";u.tooltip="Import model";r.addChild(u);u.onClick.add(()=>q());const c=new D;c.showPanel(2);document.body.append(c.dom);c.dom.style.left="0px";s.onBeforeUpdate.add(()=>c.begin());s.onAfterUpdate.add(()=>c.end());
