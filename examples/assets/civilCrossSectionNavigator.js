import{C as y,S as I,P,a as k,c as T,e as v,F as L,t as N,T as A,ad as F,aa as O,ab as x,p as B,E as D,L as R}from"./index-DOCiYP8C.js";import{S as W}from"./stats.min-B_nWG6JV.js";import{C as U}from"./index-BQA40YuP.js";import"./index-D3hq3xYW.js";const _=document.getElementById("container"),t=new y,b=new I(t);b.setup();t.scene=b;const a=new P(t,_);t.renderer=a;const w=new k(t);t.camera=w;t.init();a.postproduction.enabled=!0;a.postproduction.customEffects.outlineEnabled=!0;w.controls.setLookAt(12,6,8,0,0,-10);const j=new T(t,new v(6710886)),G=a.postproduction.customEffects;G.excludedMeshes.push(j.get());const C=new L(t),u=new N(t);u.settings.wasm={path:"https://unpkg.com/web-ifc@0.0.50/",absolute:!0};u.settings.webIfc.COORDINATE_TO_ORIGIN=!0;u.settings.webIfc.OPTIMIZE_PROFILES=!0;const H=await fetch("../../../resources/asdf2.frag"),z=await H.arrayBuffer(),Y=new Uint8Array(z),r=await C.load(Y),Z=await fetch("../../../resources/asdf2.json");r.setLocalProperties(await Z.json());const E=new A(t,{name:"Main Toolbar",position:"bottom"});t.ui.addToolbar(E);E.addChild(u.uiElement.get("main"));console.log(r);const i=new F(t),q=i.uiElement.get("floatingWindow");q.visible=!0;i.draw(r);const s=new U(t),J=s.uiElement.get("drawer");J.visible=!0;const c=new O(t);c.draw(r);c.setup();c.highlighter.hoverCurve.material.color.set(1,1,1);const{material:f}=i.highlighter.hoverPoints;if(Array.isArray(f)){const e=f[0];"color"in e&&e.color.set(1,1,1)}else"color"in f&&f.color.set(1,1,1);i.onHighlight.add(({mesh:e})=>{s.clear(),s.draw(r,[e.curve.alignment]),s.highlighter.select(e),c.highlighter.select(e);const o=e.curve.index,n=e.curve.alignment.absolute[o];n.mesh.geometry.computeBoundingSphere(),w.controls.fitToSphere(n.mesh.geometry.boundingSphere,!0)});const M=new x(t),K=M.uiElement.get("floatingWindow");K.visible=!0;i.onMarkerChange.add(({alignment:e,percentage:o,type:n,curve:m})=>{if(s.setMarker(e,o,n),c.setMarker(e,o,n),n==="select"){const l=m.alignment.absolute[m.index].mesh,g=e.getPointAt(o,"absolute");M.set(l,g)}});i.onMarkerHidden.add(({type:e})=>{s.hideMarker(e),c.hideMarker(e)});window.addEventListener("keydown",()=>{s.scene.scaleY+=.1});const p=new B(t);p.byEntity(r);const Q=p.get(),S=t.tools.get(D),h=S.styles.get();for(const e in Q.entities){const o=p.find({entities:[e]}),n=new v(Math.random(),Math.random(),Math.random()),m=new R({color:n});S.styles.create(e,new Set,m);for(const l in o){const g=C.list[l];g&&(h[e].fragments[l]=new Set(o[l]),h[e].meshes.add(g.mesh))}}const d=new W;d.showPanel(2);document.body.append(d.dom);d.dom.style.left="0px";a.onBeforeUpdate.add(()=>d.begin());a.onAfterUpdate.add(()=>d.end());
