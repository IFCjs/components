import{C as b,L as C}from"./index-chvdFvuw.js";import{S as k}from"./stats.min-GTpOrGrX.js";import"./N8AO-Di6ad4Ys.js";import{E as P}from"./index-BAGErO7F.js";import{P as S}from"./index-BYmiOnvP.js";import"./_commonjsHelpers-Cpj98o6Y.js";const A=document.getElementById("container"),t=new(void 0),v=new(void 0)(t);v.setup();t.scene=v;const r=new S(t,A);t.renderer=r;const w=new(void 0)(t);t.camera=w;t.raycaster=new(void 0)(t);t.init();r.postproduction.enabled=!0;r.postproduction.customEffects.outlineEnabled=!0;w.controls.setLookAt(12,6,8,0,0,-10);const L=new(void 0)(t,new b(6710886)),T=r.postproduction.customEffects;T.excludedMeshes.push(L.get());const E=new(void 0)(t),g=new(void 0)(t);g.settings.wasm={path:"https://unpkg.com/web-ifc@0.0.50/",absolute:!0};g.settings.webIfc.COORDINATE_TO_ORIGIN=!0;g.settings.webIfc.OPTIMIZE_PROFILES=!0;const O=await fetch("../../../resources/asdf.frag"),x=await O.arrayBuffer(),B=new Uint8Array(x),i=await E.load(B),N=await fetch("../../../resources/asdf.json");i.setLocalProperties(await N.json());const M=new(void 0)(t,{name:"Main Toolbar",position:"bottom"});t.ui.addToolbar(M);M.addChild(g.uiElement.get("main"));console.log(i);const a=new(void 0)(t),R=a.uiElement.get("floatingWindow");R.visible=!0;a.draw(i);const s=new(void 0)(t),W=s.uiElement.get("drawer");W.visible=!0;const d=new(void 0)(t);d.draw(i);d.setup();d.highlighter.hoverCurve.material.color.set(1,1,1);const{material:m}=a.highlighter.hoverPoints;if(Array.isArray(m)){const e=m[0];"color"in e&&e.color.set(1,1,1)}else"color"in m&&m.color.set(1,1,1);a.onHighlight.add(({mesh:e})=>{s.clear(),s.draw(i,[e.curve.alignment]),s.highlighter.select(e),d.highlighter.select(e);const n=e.curve.index,o=e.curve.alignment.absolute[n];o.mesh.geometry.computeBoundingSphere(),w.controls.fitToSphere(o.mesh.geometry.boundingSphere,!0)});const y=new(void 0)(t),D=y.uiElement.get("floatingWindow");D.visible=!0;a.onMarkerChange.add(({alignment:e,percentage:n,type:o,curve:u})=>{if(s.setMarker(e,n,o),d.setMarker(e,n,o),o==="select"){const c=u.alignment.absolute[u.index].mesh,f=e.getPointAt(n,"absolute");y.set(c,f)}});a.onMarkerHidden.add(({type:e})=>{s.hideMarker(e),d.hideMarker(e)});window.addEventListener("keydown",()=>{s.scene.scaleY+=.1});const h=new(void 0)(t);h.byEntity(i);const U=h.get(),I=t.tools.get(P),p=I.styles.get();for(const e in U.entities){const n=h.find({entities:[e]}),o=new b(Math.random(),Math.random(),Math.random()),u=new C({color:o});I.styles.create(e,new Set,u);for(const c in n){const f=E.list[c];f&&(p[e].fragments[c]=new Set(n[c]),p[e].meshes.add(f.mesh))}}const l=new k;l.showPanel(2);document.body.append(l.dom);l.dom.style.left="0px";r.onBeforeUpdate.add(()=>l.begin());r.onAfterUpdate.add(()=>l.end());
