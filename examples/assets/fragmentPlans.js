import{C as F,S as v,P,a as T,b as k,c as U,e as E,g as j,F as I,E as D,L as H,i as m,p as x,q as R,r as N,w as W,j as q,T as G}from"./index-DOCiYP8C.js";import{S as O}from"./stats.min-B_nWG6JV.js";const p=document.getElementById("container"),e=new F,C=new v(e);C.setup();e.scene=C;const l=new P(e,p);e.renderer=l;const S=new T(e);e.camera=S;S.controls.setLookAt(12,6,8,0,0,-10);e.raycaster=new k(e);e.init();const{postproduction:c}=l;c.enabled=!0;const w=new U(e,new E(6710886)),V=w.get();c.customEffects.excludedMeshes.push(V);const d=new j(e);d.setup();p.addEventListener("mouseup",()=>d.elements.needsUpdate=!0);p.addEventListener("wheel",()=>d.elements.needsUpdate=!0);const M=new I(e),z=await fetch("../../../resources/small.frag"),J=await z.arrayBuffer(),K=new Uint8Array(J),o=await M.load(K),Q=await fetch("../../../resources/small.json"),X=await Q.json();o.setLocalProperties(X);for(const t of o.items)d.elements.add(t.mesh);d.elements.needsUpdate=!0;const g=new D(e),L=new H({color:"black"}),Y=new m({color:"gray",side:2}),Z=new m({color:"black",side:1,opacity:.5,transparent:!0});g.styles.create("filled",new Set,L,Y,Z);g.styles.create("projected",new Set,L);const u=g.styles.get();c.customEffects.outlineEnabled=!0;const n=new x(e);n.byEntity(o);n.byStorey(o);const y=n.find({entities:["IFCWALLSTANDARDCASE","IFCWALL"]});for(const t in y){const{mesh:s}=M.list[t];u.filled.fragments[t]=new Set(y[t]),u.filled.meshes.add(s)}const A=[];for(const t of o.items){const{mesh:s}=t;A.push(s),u.projected.meshes.add(s)}const B=new E("white"),_=new m({color:B}),a=new R(e);a.addMaterial("white",_);a.addMeshes("white",A);const r=new N(e);await r.computeAllPlanViews(o);const b=new W(e),f=new q(e),$=new m({depthTest:!1,color:12382500,transparent:!0,opacity:.3});f.add("default",[$]);const ee=l.get().domElement;ee.addEventListener("click",()=>f.clear("default"));f.updateHighlight();r.commands={Select:t=>{if(!t)return;const s=n.find({storeys:[t.name]});f.highlightByID("default",s)},Show:t=>{if(!t)return;const s=n.find({storeys:[t.name]});b.set(!0,s)},Hide:t=>{if(!t)return;const s=n.find({storeys:[t.name]});b.set(!1,s)}};r.updatePlansList();const h=new G(e);h.name="Main Toolbar";e.ui.addToolbar(h);h.addChild(r.uiElement.get("main"));r.onNavigated.add(()=>{c.customEffects.glossEnabled=!1,a.setBackgroundColor(B),a.set(!0,["white"]),w.visible=!1});r.onExited.add(()=>{c.customEffects.glossEnabled=!0,a.resetBackgroundColor(),a.set(!1,["white"]),w.visible=!0});const i=new O;i.showPanel(2);document.body.append(i.dom);i.dom.style.left="0px";i.dom.style.right="auto";l.onBeforeUpdate.add(()=>i.begin());l.onAfterUpdate.add(()=>i.end());
