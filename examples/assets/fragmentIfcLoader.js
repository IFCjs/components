import{C as b,S as F,P as I,a as C,b as E,c as R,e as O,F as h,t as x,T as y,G as N,H as S,J as T}from"./index-CizoHJPb.js";import{S as L}from"./stats.min-BdKNJBVT.js";import{g as A}from"./lil-gui.module.min-Bc0DeA9g.js";import{downloadZip as B}from"https://unpkg.com/client-zip@2.3.0/index.js";const P=document.getElementById("container"),e=new b,g=new F(e);g.setup();e.scene=g;const s=new I(e,P);e.renderer=s;const u=new C(e);e.camera=u;e.raycaster=new E(e);e.init();s.postproduction.enabled=!0;const G=e.scene.get();u.controls.setLookAt(12,6,8,0,0,-10);const M=new R(e,new O(6710886)),U=s.postproduction.customEffects;U.excludedMeshes.push(M.get());const c=new h(e),o=new x(e),w=new y(e,{name:"Main Toolbar",position:"bottom"});e.ui.addToolbar(w);const _=o.uiElement.get("main");w.addChild(_);await o.setup();o.settings.wasm={path:"../../../node_modules/web-ifc/",absolute:!1};const k=[N,S,T];for(const t of k)o.settings.excludedCategories.add(t);o.settings.webIfc.COORDINATE_TO_ORIGIN=!0;o.settings.webIfc.OPTIMIZE_PROFILES=!0;async function D(){const n=await(await fetch("../../../resources/small.ifc")).arrayBuffer(),d=new Uint8Array(n),r=await o.load(d);r.name="example",G.add(r)}function j(t){const n=document.createElement("a");n.href=URL.createObjectURL(t),n.download=t.name,document.body.appendChild(n),n.click(),n.remove()}async function H(){if(!c.groups.length)return;const t=c.groups[0],n=c.export(t),d=new Blob([n]),r=new File([d],"small.frag"),m=[];m.push(r);const p=t.getLocalProperties();p&&m.push(new File([JSON.stringify(p)],"small.json"));const f=await B(m).blob();f.name="example",j(f)}function J(){c.dispose()}const a=new L;a.showPanel(2);document.body.append(a.dom);a.dom.style.left="0px";s.onBeforeUpdate.add(()=>a.begin());s.onAfterUpdate.add(()=>a.end());const i={loadFragments:()=>D(),exportFragments:()=>H(),disposeFragments:()=>J()},l=new A;l.add(i,"loadFragments").name("Import fragments");l.add(i,"exportFragments").name("Export fragments");l.add(i,"disposeFragments").name("Dispose fragments");o.onIfcLoaded.add(t=>{console.log(t)});
