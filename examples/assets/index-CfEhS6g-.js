var m=Object.defineProperty;var p=(n,i,e)=>i in n?m(n,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[i]=e;var r=(n,i,e)=>(p(n,typeof i!="symbol"?i+"":i,e),e);import{ac as v,a1 as u,a$ as w,b0 as f}from"./index-CizoHJPb.js";import{D as M}from"./index-CuWXavck.js";class k extends v{constructor(e){super(e);r(this,"view","vertical");r(this,"uiElement",new u);r(this,"highlighter");r(this,"kpManager");this.setUI();const h=this.scene.get();this.highlighter=new w(h,"vertical"),this.kpManager=new f(e,this.scene.renderer,this.scene.get(),this.scene.controls,this.view),this.highlighter.onSelect.add(d=>{this.kpManager.dispose();const{alignment:t}=d.curve,a=[];for(const s of t.vertical){const c=s.mesh.geometry.attributes.position.array;a.push(c)}const{defSegments:o,slope:g}=this.setDefSegments(a),l=this.scene.get();for(let s=0;s<t.vertical.length;s++){const c=t.vertical[s];this.kpManager.addCivilVerticalMarker(`S: ${g[s].slope}%`,c.mesh,"Slope",l),this.kpManager.addCivilVerticalMarker(`H: ${o[s].end.y.toFixed(2)}`,c.mesh,"Height",l)}this.kpManager.addCivilVerticalMarker("KP: 0",t.vertical[0].mesh,"InitialKPV",l),this.kpManager.addCivilVerticalMarker(`KP: ${t.vertical.length}`,t.vertical[t.vertical.length-1].mesh,"FinalKPV",l)})}get(){return null}showKPStations(e){console.log(e)}clearKPStations(){}setUI(){const e=new M(this.components);this.components.ui.add(e),e.alignment="top",e.onVisible.add(()=>{this.scene.grid.regenerate()}),e.visible=!1,e.slots.content.domElement.style.padding="0",e.slots.content.domElement.style.overflow="hidden";const{clientWidth:h,clientHeight:d}=e.domElement;this.scene.setSize(d,h);const t=this.scene.uiElement.get("container");e.addChild(t),this.uiElement.set({drawer:e}),e.onResized.add(()=>{const a=window.innerWidth,o=this.scene.size.y;this.scene.setSize(o,a)}),e.onResized.add(()=>{const{width:a,height:o}=e.containerSize;this.scene.setSize(o,a)}),this.components.renderer.isUpdateable()&&this.components.renderer.onAfterUpdate.add(async()=>{e.visible&&await this.scene.update()})}}r(k,"uuid","097eea29-2d5a-431a-a247-204d44670621");export{k as C};
